@model IEnumerable<GateCommunityMvc.Models.Visitors>

@{
    ViewData["Title"] = "Pendingvisitors";
    Layout = "~/Views/Resident/_Layout.cshtml";
}

<h1>Pendingvisitors</h1>

<p>
 
</p>
<table id="residentp" class="table table-striped table-bordered">
    <thead>
        <tr>
          
            <th>
               Visitor Name
            </th>
            <th>
                Gender
            </th>
            <th>
               Vitor Type
            </th>
            <th>
              Work as
            </th>
            <th>
               Contact
            </th>
            <th>
              Purpose of visit
            </th>
           
            <th>
                From
            </th>
            <th>
              Vehicle no:
            </th>
           
            <th>
               Profile
            </th>
            <th>
                Document
            </th>
            
          
          
            <th>
                Action
            </th>
        </tr>
    </thead>
    <tbody>
@foreach (var item in Model) {
        <tr>
            <td>
              @item.visitorName
            </td>
            <td>
                    @item.gender
            </td>
            <td>
                    @item.visitorType
            </td>
            <td>
                    @item.workas
            </td>
            <td>
                    @item.visitorcontact
            </td>
            <td>
                    @item.purposeofvisit
            </td>
            <td>
             @item.from
            </td>
            <td>
                    @item.vehicleno
            </td>
            <td>
                    <img src="~/@item.profilepath" width="50" height="50" alt="Profile Image" />
            </td>
            <td>
                    <a href="@Url.Action("OpenFile", "Resident", new { id = item.visitorId })">
                        <i class="fas fa-eye"></i> View File
                    </a>
            </td>
           
            
            <td>
                    @if (item.status == "Pending")
                    {
                        <form asp-controller="Resident" asp-action="HandleRequest" method="post">
                            <input type="hidden" name="id" value="@item.visitorId" />
                            <button type="submit" name="action" value="Approve">Approve</button>
                            <button type="submit" name="action" value="Reject">Reject</button>
                        </form>
                    }
            </td>
        </tr>
}
    </tbody>
</table>
